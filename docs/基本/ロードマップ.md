# ロードマップ

GitHub Trend Trackerの開発ロードマップと機能実装状況を管理します。

## 開発フェーズ概要

| Phase                | 状態   | 期間目安   | 主な目標                                     |
| -------------------- | ------ | ---------- | -------------------------------------------- |
| **Phase 1 (MVP)**    | 実装中 | 2026年1-2月 | 基本的なトレンド可視化機能の提供             |
| **Phase 2 (拡張)**   | 計画中 | 2026年3-4月 | 検索・フィルタリング機能の強化               |
| **Phase 3 (収益化)** | 未定   | 2026年5月以降 | 認証・課金・AI機能の実装                   |

## Phase 1: MVP（最小実用製品）

**目標**: エンジニアが日次でトレンドをチェックできる基本機能を提供

### ✅ 完了済み機能

- [x] **プロジェクトセットアップ**
  - [x] Cloudflare D1データベースセットアップ
  - [x] Drizzle ORMスキーマ定義
  - [x] Hono API実装（基本エンドポイント）
  - [x] Astroフロントエンド実装
  - [x] TypeScriptモノレポ構成
  - [x] ESLint/Prettier設定
  - [x] CI/CDパイプライン（テスト・ビルド）

- [x] **データ収集・バッチ処理**
  - [x] GitHub API データ収集スクリプト
  - [x] GitHub Actions 日次実行設定
  - [x] 日次データ収集バッチエンドポイント（bac-011）
  - [x] メトリクス計算バッチエンドポイント（bac-012）
  - [x] 週別トレンド集計バッチエンドポイント（bac-013）

- [x] **APIエンドポイント**
  - [x] `GET /health` - ヘルスチェック
  - [x] `GET /api/languages` - 言語一覧取得
  - [x] `GET /api/trends/daily` - 日次トレンドランキング
  - [x] `GET /api/repositories/:repoId` - リポジトリ詳細＋90日間履歴
  - [x] OpenAPI仕様書作成

- [x] **フロントエンド機能**
  - [x] トレンド一覧画面（日次）
  - [x] 言語フィルタリングUI
  - [x] ページネーション機能（Issue #66）
  - [x] 5種類のソート機能（Issue #64）
    - 7日間スター増加数
    - 30日間スター増加数
    - 7日間増加率
    - 30日間増加率
    - 総スター数
  - [x] メトリクスバッジ表示（7d/30d増加数・率）（Issue #65）
  - [x] リポジトリ詳細ページ
  - [x] スター数時系列グラフ（Recharts）
  - [x] カスタムツールチップ付きチャート（Issue #68）

### 🚧 進行中

- [ ] **パフォーマンス最適化**
  - [ ] LCP 2秒以内達成
  - [ ] API応答時間 P95 200ms以内達成

### 📋 残タスク

- [ ] **デプロイ・運用**
  - [ ] Cloudflare Pagesへのフロントエンドデプロイ
  - [ ] 本番環境でのCORS設定最適化
  - [ ] エラーハンドリングの詳細化
  - [ ] モニタリング・ログ設定

- [ ] **ドキュメント整備**
  - [x] アーキテクチャドキュメント
  - [x] セットアップガイド
  - [x] ロードマップ
  - [ ] API利用ガイド（外部公開用）

---

## Phase 2: 拡張機能

**目標**: ユーザー体験を向上させる検索・分析機能の追加

### 🎯 計画中の機能

#### 検索機能
- [ ] **リポジトリ名検索** (fun-016)
  - [ ] `GET /api/repositories/search` エンドポイント実装
  - [ ] 検索結果一覧画面（scr-004）
  - [ ] 部分一致検索UI
  - [ ] 検索履歴（ローカルストレージ）

#### お気に入り機能
- [ ] **お気に入り登録** (fun-017, fun-018)
  - [ ] ローカルストレージによる永続化
  - [ ] お気に入り一覧画面
  - [ ] お気に入りバッジ表示
  - [ ] エクスポート/インポート機能

#### 週別トレンド機能
- [ ] **週別トレンドランキング** (fun-019, fun-020, fun-021)
  - [ ] `GET /api/trends/weekly` エンドポイント（実装済み：bac-013）
  - [ ] `GET /api/trends/weekly/available-weeks` エンドポイント
  - [ ] 週別トレンドランキング画面（scr-003）
  - [ ] 週選択UI（カレンダーまたはドロップダウン）
  - [ ] 週別データ可視化

#### UIの改善
- [ ] **レスポンシブデザイン強化**
  - [ ] モバイル対応の最適化
  - [ ] タブレット表示対応
- [ ] **アクセシビリティ向上**
  - [ ] キーボードナビゲーション
  - [ ] スクリーンリーダー対応
  - [ ] WAI-ARIA属性の追加

### 📅 想定スケジュール

| 機能             | 開始予定   | 完了目標   |
| ---------------- | ---------- | ---------- |
| リポジトリ検索   | 2026年3月  | 2026年3月  |
| お気に入り機能   | 2026年3月  | 2026年3月  |
| 週別トレンド     | 2026年4月  | 2026年4月  |
| UI改善           | 2026年4月  | 2026年4月  |

---

## Phase 3: 収益化

**目標**: 認証・課金機能を導入し、AI要約などのプレミアム機能を提供

### 💡 構想中の機能

#### 認証機能
- [ ] **GitHub OAuth認証** (fun-031, fun-032)
  - [ ] `GET /api/auth/callback/github` エンドポイント
  - [ ] ログイン画面UI（scr-011）
  - [ ] セッション管理（JWT or Cloudflare Workers KV）
  - [ ] ログアウト機能

#### AI要約機能（収益源）
- [ ] **リポジトリAI要約** (fun-035, fun-036, fun-037, fun-038)
  - [ ] `GET /api/repositories/:repoId/summary` エンドポイント
  - [ ] `POST /api/repositories/:repoId/summary/generate` エンドポイント
  - [ ] Claude API / OpenAI API 連携
  - [ ] 要約結果のキャッシュ（コスト削減）
  - [ ] 無料ユーザー向けプレビュー表示（先頭100文字のみ）
  - [ ] 課金ユーザー向けフル要約表示

#### 課金機能
- [ ] **Stripe決済連携** (fun-040, fun-041, fun-042, fun-043)
  - [ ] `POST /api/billing/checkout` エンドポイント
  - [ ] `POST /api/webhook/stripe` エンドポイント
  - [ ] 月額プラン設定（例: ¥500/月）
  - [ ] サブスクリプション管理画面
  - [ ] 決済履歴表示

#### バッチ処理
- [ ] **週別AI要約自動生成バッチ** (bac-014)
  - [ ] `POST /api/internal/batch/generate-ai` エンドポイント
  - [ ] トップ10リポジトリの自動要約生成
  - [ ] コスト管理（月次予算上限設定）

### 🚀 技術的な考慮事項

#### セキュリティ
- [ ] CORS設定の本番環境向け最適化
- [ ] レート制限の実装（APIエンドポイント毎）
- [ ] Stripe Webhook署名検証
- [ ] JWTトークンの安全な管理

#### コスト管理
- [ ] AI API利用量のモニタリング
- [ ] D1データベース使用量の監視
- [ ] Workers実行時間の最適化
- [ ] キャッシュ戦略の再設計

### 📅 想定スケジュール

| 機能             | 開始予定   | 完了目標   |
| ---------------- | ---------- | ---------- |
| GitHub OAuth認証 | 2026年5月  | 2026年5月  |
| AI要約機能       | 2026年6月  | 2026年7月  |
| Stripe決済連携   | 2026年7月  | 2026年8月  |
| 運用・改善       | 2026年9月以降 | 継続     |

---

## バックログ（優先度未定）

### 将来的に検討する機能

- [ ] **多言語対応（i18n）**
  - 英語/日本語の切り替え
  - 言語検出の自動化

- [ ] **通知機能**
  - お気に入りリポジトリの急成長アラート
  - 週次レポートのメール配信

- [ ] **高度な分析機能**
  - トピック別トレンド分析
  - 言語間の比較グラフ
  - 成長率予測（機械学習）

- [ ] **コミュニティ機能**
  - ユーザー間でのリポジトリ共有
  - コメント機能
  - おすすめリポジトリのキュレーション

- [ ] **APIの外部公開**
  - 開発者向けAPI提供
  - API Key管理
  - 利用量制限

---

## 技術的負債・改善項目

### 現時点で認識している課題

| 項目                     | 優先度 | 説明                                               |
| ------------------------ | ------ | -------------------------------------------------- |
| エラーハンドリングの詳細化 | 高     | 汎用500エラーを具体的なエラーメッセージに置き換え |
| CORS設定の最適化          | 高     | 全オリジン許可を本番環境向けに制限                 |
| テストカバレッジ向上      | 中     | 現在のテストは基本的なものに限定                   |
| パフォーマンス計測        | 中     | LCP, API応答時間の定期的なモニタリング             |
| ドキュメント自動生成      | 低     | OpenAPI仕様からクライアントSDK生成                 |

---

## 関連ドキュメント

- [プロジェクト概要](../要件定義/プロジェクト概要.md) - サービスの目的・背景
- [機能要件一覧](../要件定義/機能要件一覧.md) - 全機能の詳細定義
- [API定義](../設計/API定義.md) - エンドポイント仕様
- [開発プロセス](../プロセス/開発プロセス.md) - 開発フロー・品質基準

---

## 更新履歴

| 日付       | 内容                                           |
| ---------- | ---------------------------------------------- |
| 2026-02-11 | ロードマップドキュメント初版作成               |
| 2026-02-11 | Phase 1完了済み機能を最新状態に更新（bac-013まで） |
