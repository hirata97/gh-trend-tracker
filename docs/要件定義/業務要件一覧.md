# 業務要件一覧

ユーザー視点での要件を定義する。

## 閲覧

### req-001: 言語別トレンドランキング表示

- **概要**: 選択された言語に基づき、最新のトレンドランキング（トップ100）を一覧表示できる
- **利用者**: エンジニア
- **関連機能**: [fun-001](./機能要件一覧.md#fun-001-言語別トレンド一覧表示), [fun-002](./機能要件一覧.md#fun-002-ランキングリポジトリ情報の取得), [fun-003](./機能要件一覧.md#fun-003-リポジトリ基本情報のリスト表示)

### req-002: リポジトリ基本情報の表示

- **概要**: ランキングリストに、リポジトリ名、スター数、フォーク数、概要などの基本情報を表示する
- **利用者**: エンジニア
- **関連機能**: [fun-003](./機能要件一覧.md#fun-003-リポジトリ基本情報のリスト表示)

## メトリクス

### req-003: 7日間スター増加数の表示

- **概要**: トレンド一覧において、過去7日間のスター増加数をリポジトリごとに表示する
- **利用者**: テックリード
- **関連機能**: [fun-004](./機能要件一覧.md#fun-004-7日間スター増加数の表示)

### req-004: 30日間スター増加数の表示

- **概要**: トレンド一覧において、過去30日間のスター増加数をリポジトリごとに表示する（β版）
- **利用者**: テックリード
- **関連機能**: [fun-005](./機能要件一覧.md#fun-005-30日間スター増加数の表示)

## フィルタリング

### req-005: 言語フィルタリング機能

- **概要**: 表示言語をTypeScript、Pythonなど、定義された言語リストから選択して絞り込むことができる
- **利用者**: エンジニア
- **関連機能**: [fun-006](./機能要件一覧.md#fun-006-言語選択ui提供), [fun-007](./機能要件一覧.md#fun-007-言語フィルタリングの適用)

## ソート

### req-006: 7日間増加率/数によるソート

- **概要**: リストを、過去7日間のスター増加率または増加数に基づきソートし、急成長中のプロジェクトを発見できる
- **利用者**: テックリード
- **関連機能**: [fun-008](./機能要件一覧.md#fun-008-7日間増加率数によるソート実行)

### req-007: 30日間増加率/数によるソート

- **概要**: リストを、過去30日間のスター増加率または増加数に基づきソートできる（β版）
- **利用者**: テックリード
- **関連機能**: [fun-009](./機能要件一覧.md#fun-009-30日間増加率数によるソート実行)

### req-008: スター総数によるソート

- **概要**: リストを、現在のスター総数に基づき降順にソートできる
- **利用者**: エンジニア
- **関連機能**: [fun-010](./機能要件一覧.md#fun-010-スター総数によるソート実行)

## 詳細閲覧

### req-009: リポジトリ詳細ページの表示

- **概要**: ランキングまたは検索結果から特定のリポジトリの詳細ページに遷移できる
- **利用者**: エンジニア
- **関連機能**: [fun-011](./機能要件一覧.md#fun-011-リポジトリ詳細ページへの遷移)

## 可視化

### req-010: 過去90日間のスター推移グラフ表示

- **概要**: リポジトリ詳細ページに、過去90日間のスター数の日次推移を折れ線グラフで表示し、成長傾向を視覚化できる
- **利用者**: テックリード
- **関連機能**: [fun-012](./機能要件一覧.md#fun-012-過去90日間のスター推移データ取得), [fun-013](./機能要件一覧.md#fun-013-スター推移グラフの描画)

## 情報提供

### req-011: データ取得日時の明示

- **概要**: 画面上部に、表示されているデータがGitHubから取得された最終日時（スナップショット日時）を明記する
- **利用者**: ブロガー
- **関連機能**: [fun-014](./機能要件一覧.md#fun-014-データスナップショット日時表示)

## 検索

### req-012: リポジトリ名検索機能

- **概要**: リポジトリ名（フルネームまたは部分一致）による検索機能を提供する（β版）
- **利用者**: エンジニア
- **関連機能**: [fun-015](./機能要件一覧.md#fun-015-リポジトリ名検索入力フォームの提供), [fun-016](./機能要件一覧.md#fun-016-リポジトリ名検索実行)

### req-013: 検索結果の一覧表示

- **概要**: 検索クエリに合致したリポジトリを一覧表示し、詳細ページへ遷移できるようにする
- **利用者**: エンジニア
- **関連機能**: [fun-017](./機能要件一覧.md#fun-017-検索結果一覧の表示)

## 週別分析

### req-014: 週別トレンドランキングの閲覧

- **概要**: 過去の任意の週（ISO週番号）を選択し、その週のスター増加数に基づくトップ10ランキングを閲覧できる
- **利用者**: ブロガー
- **関連機能**: [fun-018](./機能要件一覧.md#fun-018-週別トレンドランキングページ表示), [fun-019](./機能要件一覧.md#fun-019-指定された週のランキングデータ取得)

### req-015: 週別ランキングの言語フィルタリング

- **概要**: 週別トレンドランキングにおいても、言語フィルタリングを適用できる
- **利用者**: ブロガー
- **関連機能**: [fun-020](./機能要件一覧.md#fun-020-週別ランキングの言語フィルタリング適用)

### req-016: 期間選択ナビゲーション

- **概要**: データが存在する過去の週を容易に選択できるナビゲーションを提供する
- **利用者**: エンジニア
- **関連機能**: [fun-021](./機能要件一覧.md#fun-021-利用可能な過去週リスト取得), [fun-022](./機能要件一覧.md#fun-022-期間選択ナビゲーションuiの提供)

## データ処理

### req-017: 日次データ収集バッチ

- **概要**: 毎日UTC 0:00にGitHub APIからターゲットリポジトリの最新スナップショットを取得・保存する
- **利用者**: 技術選定者
- **関連機能**: [fun-023](./機能要件一覧.md#fun-023-github-apiからのリポジトリ情報取得), [fun-024](./機能要件一覧.md#fun-024-日次スナップショットデータのdb保存)

### req-018: 週別トレンド集計バッチ

- **概要**: 週の変わり目に、週単位のスター増加数を計算し、週別トレンドランキングを事前計算・保存する
- **利用者**: 技術選定者
- **関連機能**: [fun-025](./機能要件一覧.md#fun-025-週別トレンド集計ロジックの実行), [fun-026](./機能要件一覧.md#fun-026-週別集計結果のdb保存)

### req-019: 増加率の事前計算

- **概要**: スナップショットデータに基づき、7日間および30日間のスター増加数/増加率を計算し、DBに保存する
- **利用者**: 技術選定者
- **関連機能**: [fun-027](./機能要件一覧.md#fun-027-7日間30日間スター増加数率の計算ロジック実行), [fun-028](./機能要件一覧.md#fun-028-計算済み増加率のdb保存)

## UX/非機能

### req-020: レスポンシブ対応

- **概要**: スマートフォン、タブレット、PCの各デバイス幅に対応し、レイアウトが崩れないようにする
- **利用者**: エンジニア
- **関連機能**: [fun-029](./機能要件一覧.md#fun-029-レスポンシブui実装)

## パフォーマンス

### req-021: LCP目標達成

- **概要**: トレンド一覧ページのLCP（Largest Contentful Paint）を2秒以内に収めるように最適化する
- **利用者**: 技術選定者
- **関連非機能**: [non-001](./非機能要件一覧.md#non-001-lcp目標達成)

## 認証

### req-022: GitHub OAuth認証

- **概要**: ユーザーがGitHubアカウントを通じて本サービスにログインできるようにする（Phase 3）
- **利用者**: エンジニア
- **関連機能**: [fun-030](./機能要件一覧.md#fun-030-github-oauth認証開始リダイレクト), [fun-031](./機能要件一覧.md#fun-031-oauthコールバック時のユーザー登録ログイン処理)

### req-023: ログイン状態の保持

- **概要**: ログイン後、セッション管理により一定期間はログイン状態を保持し、再ログインを不要とする
- **利用者**: エンジニア
- **関連機能**: [fun-032](./機能要件一覧.md#fun-032-ログインセッションの生成と保持)

## 課金/権限

### req-024: 課金状態の管理

- **概要**: ユーザーの課金プラン（無料/Pro/クレジット残高）を管理し、AI機能などへのアクセス可否を判定する
- **利用者**: 技術選定者
- **関連機能**: [fun-033](./機能要件一覧.md#fun-033-ユーザーの課金プラン情報の登録更新), [fun-034](./機能要件一覧.md#fun-034-機能アクセス権限判定)

## AI機能

### req-025: AI要約閲覧（課金ユーザー）

- **概要**: 課金ユーザーは、生成済みのリポジトリAI要約（スライド形式の構造化サマリー）の全文を閲覧できる
- **利用者**: テックリード
- **関連機能**: [fun-035](./機能要件一覧.md#fun-035-ai要約全文の取得と表示課金ユーザー向け), [fun-036](./機能要件一覧.md#fun-036-ai要約スライド形式表示uiの提供)

### req-026: AI要約プレビュー（無料ユーザー）

- **概要**: 無料ユーザーは、AI要約の概要（プレビュー）として最初の1ページのみを閲覧できる
- **利用者**: エンジニア
- **関連機能**: [fun-037](./機能要件一覧.md#fun-037-ai要約プレビューの取得無料ユーザー向け), [fun-038](./機能要件一覧.md#fun-038-ai要約プレビュー表示とアップグレード誘導)

### req-027: オンデマンド生成要求

- **概要**: 課金ユーザーは、要約が未生成のリポジトリに対して、クレジットまたは月間制限内で即時生成を要求できる
- **利用者**: テックリード
- **関連機能**: [fun-039](./機能要件一覧.md#fun-039-ai要約のオンデマンド生成要求受付), [fun-040](./機能要件一覧.md#fun-040-オンデマンド生成要求時のクレジット制限の確認), [fun-041](./機能要件一覧.md#fun-041-ai-apiを呼び出しリポジトリ概要を生成)

### req-028: AI要約バッチ生成

- **概要**: 週別トップ10など、注目のリポジトリのAI要約を定期的に自動生成するバッチ処理を実行する
- **利用者**: 技術選定者
- **関連機能**: [fun-042](./機能要件一覧.md#fun-042-ai要約バッチ実行トリガー管理), [fun-043](./機能要件一覧.md#fun-043-週別トップリポジトリのai要約自動生成)

## UX/拡張

### req-029: 言語別ブックマーク機能の誘導

- **概要**: 利用者が頻繁に利用する言語フィルタを簡単に保存・再訪できるように誘導するUIを設ける
- **利用者**: エンジニア
- **関連機能**: [fun-044](./機能要件一覧.md#fun-044-言語フィルタ設定のブックマーク誘導ui表示)

### req-030: グラフデータのツールチップ表示

- **概要**: スター推移グラフ上において、マウスオーバー時に特定日の正確なスター数と増加数を表示する
- **利用者**: エンジニア
- **関連機能**: [fun-045](./機能要件一覧.md#fun-045-グラフデータのツールチップ表示)

## 拡張

### req-031: お気に入り機能（ローカル保存）

- **概要**: ログイン状態にかかわらず、ブラウザのローカルストレージを利用して気になるリポジトリをお気に入り登録できる（Phase 2）
- **利用者**: エンジニア
- **関連機能**: [fun-047](./機能要件一覧.md#fun-047-リポジトリのお気に入り状態のローカルストレージ保存)

### req-032: リポジトリトピックスの表示

- **概要**: リポジトリに設定されたトピックス（GitHubのタグ）を詳細ページに表示する
- **利用者**: エンジニア
- **関連機能**: [fun-048](./機能要件一覧.md#fun-048-リポジトリ詳細ページでのトピックス情報表示)

## 課金/拡張

### req-033: 決済システムとの連携

- **概要**: Stripeと連携し、サブスクリプションまたはクレジット購入の決済フローを提供する（Phase 3）
- **利用者**: 技術選定者
- **関連機能**: [fun-049](./機能要件一覧.md#fun-049-stripe-checkoutセッションの生成とリダイレクト), [fun-050](./機能要件一覧.md#fun-050-stripe-webhookによる決済イベント受信), [fun-051](./機能要件一覧.md#fun-051-決済成功時のユーザー課金プランのアクティベーション処理)

## セキュリティ

### req-034: APIレート制限

- **概要**: 外部からの過剰なアクセスを防ぐため、公開APIエンドポイントに対してレート制限（100リクエスト/分/IP）を設ける
- **利用者**: 技術選定者
- **関連非機能**: [non-008](./非機能要件一覧.md#non-008-apiレート制限)
