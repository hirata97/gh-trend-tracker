# 非機能要件一覧

パフォーマンス、セキュリティ、可用性などの非機能要件を定義する。

## パフォーマンス

### non-001: LCP目標達成

- **概要**: トレンド一覧ページのLCP（Largest Contentful Paint）を2秒以内に収めるように最適化する
- **測定方法**: Lighthouse / PageSpeed Insights
- **目標値**: LCP ≤ 2秒

### non-002: API応答速度

- **概要**: 主要なAPIエンドポイントの応答時間（P95）を200ms以内に維持する
- **測定方法**: Cloudflare Analytics / カスタムログ
- **目標値**: P95 ≤ 200ms

### non-003: 同時接続許容数

- **概要**: システムが100ユーザーの同時接続に安定して対応できること
- **測定方法**: 負荷テスト（k6等）
- **目標値**: 100同時接続

## 可用性

### non-004: 稼働率目標

- **概要**: サービスの稼働率を99%以上とする（月間ダウンタイム7時間以内）
- **測定方法**: Uptime監視サービス
- **目標値**: ≥ 99%

### non-005: 復旧時間目標(RTO)

- **概要**: 重大な障害発生時、4時間以内にサービスを復旧させること
- **目標値**: RTO ≤ 4時間

### non-006: データ損失許容(RPO)

- **概要**: データ損失を最大24時間分に許容する（日次バックアップによる）
- **目標値**: RPO ≤ 24時間

### non-016: AI機能の独立性

- **概要**: AI要約機能（付加価値モジュール）はコア機能から分離し、AI機能の障害がトレンド閲覧機能の可用性を損なわないこと
- **実現方法**: モジュール分離、サーキットブレーカー

## セキュリティ

### non-007: 通信暗号化

- **概要**: すべてのユーザー通信においてHTTPSを利用し、暗号化を必須とする
- **実現方法**: Cloudflare SSL/TLS

### non-008: APIレート制限

- **概要**: 外部からの過剰なアクセスを防ぐため、公開APIエンドポイントに対してレート制限を設ける
- **目標値**: 100リクエスト/分/IP
- **実現方法**: Cloudflare Rate Limiting / Honoミドルウェア

### non-009: SQLインジェクション対策

- **概要**: Drizzle ORMを利用し、パラメータ化されたクエリによってSQLインジェクションを防ぐ
- **実現方法**: Drizzle ORM使用、生SQLの禁止

### non-010: 入力データ検証

- **概要**: すべてのAPI入力に対し、Zodなどのライブラリを用いてスキーマ検証を実施する
- **実現方法**: Zod + Honoバリデーション

## スケーラビリティ

### non-011: データ量拡張性

- **概要**: リポジトリデータ量が5,000件（現状の10倍）まで増加しても、主要機能のパフォーマンスを維持できる設計であること
- **実現方法**: 適切なインデックス設計、クエリ最適化

### non-012: 言語フィルタリング拡張性

- **概要**: 対象言語数が30言語に増加しても、トレンドランキング機能が機能すること
- **実現方法**: 言語マスタのDB管理

### non-013: 履歴データ保持期間

- **概要**: リポジトリの履歴データ保持期間を90日から365日に拡張できる設計であること
- **実現方法**: パーティショニング検討、古いデータのアーカイブ戦略

## ユーザビリティ

### non-014: レスポンシブデザイン

- **概要**: スマートフォン、タブレット、PCの各デバイス幅に対応し、レイアウトが崩れないようにする
- **ブレークポイント**:
  - モバイル: < 768px
  - タブレット: 768px - 1024px
  - PC: > 1024px

## 運用・データ

### non-015: データ更新頻度

- **概要**: データの更新は日次バッチ（UTC 0:00）で行い、リアルタイム性は求めないことを前提とする
- **更新タイミング**: 毎日 UTC 0:00
